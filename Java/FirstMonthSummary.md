# 1.0 入门

## 1.1 基础
**把重复性的劳动变成创建一个可以在计算机上执行并完成指定任务的程序**

**好的身体是一切成功的**

JAVA是一种可以在各种计算机上通用的程序设计语言。Java编译器把源代码编译成字节码。一些专用词汇（keyword）被保留，作为编程的语法元素。

为了实现跨平台，需要定义统一的程序格式。为了兼容各种CPU，还需要定义一套统一的虚拟指令集，让程序运行在统一的内存框架下。
Java程序运行在专门为它定义的虚拟机（Java Virtual Machine）上。

JVM本身没有定义Java程序语言，它只是定义了包含JVM指令集的class文件的格式，以及一个符号表。
一个JVM可以一次性地解释字节码，或者把字节码编译成它所运行的本地代码。
Java字节码程序可以运行在任何有字节码解释器的程序上。
JVM定义了一套通用的虚拟指令集。JVM指令集基于栈结构的计算机，相关操作数在栈顶运行。

Java源代码可以被编译成字节码的一种中间状态，然后由已提供的虚拟机来执行这些字节码。
Java程序需要一个运行环境来执行代码。Java运行环境（JRE）是一个JVM的实现。

## 1.2 开发环境
- 下载Java SE（标准版本），即Java开发环境（JDK）。JDK包括Java Runtime Environment，一堆Java工具和Java基础类库。
- 设置环境变量。JDK相关的软件都放在一个叫作JAVA_HOME的根目录。使用echo命令检查环境变量。
环境变量PATH指定了从哪里找java.exe这样可执行的文件。可以临时设置Path的环境变量。



# 2.0 结构化程序设计

结构化程序设计是把一个问题分成多个子模块，然后按模块分别实现。

## 2.1 基础概念
### 2.1.1 基本的数据类型
- 基本的数据类型
  - 字符类型
  - 字符串类型
  - 数值类型
- 基本算术运算符

### 2.1.2 变量
一个变量指代一个数据结构。所有的变量必须先定义再使用。
定义一个变量时，要指定这个变量的数据类型。可以同时声明多个相同类型的变量。

变量名不能使用保留字，不可以包含特殊符号，不能以数字开头。特例：可以使用美元符号作为变量名。

声明变量的同时，可以赋予它初始值。变量必须先有值才能参与运算。

可以把一个变量强制转换成另一个变量。

常量可以用final关键词保护其不被修改。

### 2.1.3 表达式
Java语言规定了运算符的优先级与结合性。
优先级是指同一个表达式中多个运算符被执行的次序。
在表达式求值时，先按运算符的优先级别由高到低的次序执行。
如果优先级别相同，按规定的结合性处理。

使用组合运算符可以简化代码。

自加运算符，自减运算符的位置不同，运算顺序不同。

## 2.2 控制结构
语句是Java解释器要执行的命令。语句默认是按顺序执行的，但也存在一些能够改变默认执行顺序的流程控制语句。

一个有效的Java表达式语句以分号结尾。

复合语句是一段被大括号{}包裹的代码块。基本数据类型的作用域不超过它所在的复合语句。

### 2.2.1 判断条件
程序根据布尔类型变量的值来决定是否执行某段代码。布尔类型只有两个true和false。
对于复杂的布尔表达式，JVM一旦得出结果，会跳过剩余部分，立即返回结果。

三元运算符：输入条件？真值：假值。符合条件返回真值，否则返回假值。

if-else条件判断语句。如果程序语句块只有一条语句，大括号可以省略。*注意不要使用赋值操作符=进行判断*。
安排判断的先后次序，要使执行速度最快，逻辑值最有可能为真的判断放在最前面执行。

循环：每一次执行循环代码块之前，根据循环条件决定是否继续执行循环代码块。当满足循环条件时，继续执行循环体中的代码。
所有循环必须提供有效的循环终止的条件。
循环可以包括循环。

while循环的执行过程：首先计算条件表达式的值，如果为真，则执行后面的循环体，执行完后，再开始一个新的循环；如果为假，终止循环，执行循环体后面的语句。
do-while循环先执行循环体再判断条件。
for循环用在循环次数已知的情况下。
可以使用break语句来强制终止循环。可以使用continue语句强制重新判断条件，是否开始新的循环。

## 2.3 方法
把一段多次重复出现的代码命名成一个有意义的名字，然后通过名字来执行这段代码。

结构化的程序设计方法。一般把一个复杂问题分解成若干子问题。把程序要解决的总目标分解为子目标，再进一步分解为具体的小目标，把一个小目标成为一个模块。

使用方法，调试程序也更加容易。找出有问题的方法后，在方法内定位错误很方便。

程序的任何一条执行路径都要返回值，否则程序无法通过编译。

Java程序的入口是main方法。

递归调用。递归容易导致性能问题。对于同样的计算，使用循环比使用递归调用高效得多。

用方法调用栈跟踪一系列的方法调用过程。

## 2.4 数组
new关键词创建一个新的数组，并设置长度。数组创建后，长度不再改变。

在声明数组时，不能指定数组的大小。

数组的元素默认有初始值。

Java数组的下标从0开始。for-each循环遍历简单，效率更高。

使用System.arraycopy方法来用来批量快速移动数组中的数据。

循环不变式。

## 2.5 字符串
Java用的是16位无符号型数据，属于Unicode字符集。可以通过直接指定Unicode编码值来定义一个字符。

String.format方法可以使用指定的格式字符串和参数返回一个格式化字符串。

## 2.6 数值类型
int类型的精度不变，范围是-2^31到2^31. long类型，范围是-2^63到2^363. long的数值最后要加上大写的L。浮点类型float，double。

byte一个字节，short两个字节，int四个字节，float四个字节，long八个字节，double八个字节。

高级数据要转换为低级数据，要使用强制类型转换。但会损失精度。组合表达式隐含类型转换。低级数据可以自动转换为高级数据。

## 2.7 提高代码质量
软件往往是自底向上开发出来的，所以开始时可以写出来一些核心模块的代码。而写单元代码时，需要做单元测试。上线运行时，又需要输出日志。
如果代码经过修修补补后，结构不好，就需要重构。

代码整洁。通过缩进分段。

单元测试：可以把一个类的测试代码直接写在这个类的main方法中，往往需要很多可以直接执行的测试代码。可以把这些功能不同的代码封装在不同的方法中，避免大量的使用注释代码。根据给定的输入，可以使用assertEquals方法来判断实际值和期望值是否相同。


# 3.0 面向对象编程
同时封装函数和数据，增强安全性和简化编程。

## 3.1 类和对象
为了能够封装细节，需要抽象出对象。只要写出对象的实例代码，就可以创建这个对象并使用它。

类是对象的定义，对象是类的一个实例。在Java中，类往往是.java文件编译出来的.class文件。对象就是类代码到内存区域的一个映射。

类：
- 类的定义包含属性和方法。
- static静态类方法
- 类变量
  - final变量只能被赋值一次
  - 如果需要动态地给这个常量赋值，则可以放在static{}程序块中。
  - 实例变量的权限
  - 静态变量可以通过类名直接访问
  - 在方法中定义和使用的变量叫做局部变量。
  
方法：
- 静态方法
- 实例方法
- 通过构造方法初始化对象的状态。构造方法和类同名
- private/public权限

为了防止通过引用修改对象中的对象值，可以使用防御型的复制机制来初始化对象。

### 3.1.1 对象：
- new生成对象
- 对象的复制

等于==用来比较两个对象变量是否指向同一个对象。对象的euqal方法比较两个对象变量内容是否相等。

toString返回一个描述对象内部状态的字符串。

调用方法的时候往往是方法栈中压入基本元素类型和对象引用。方法调用结束后，方法栈出栈。
方法体里很多计算都是在栈顶实现的。出栈的时候，方法中的局部变量和对象的引用都随着调用方法所属的栈消失，只把方法的返回值赋值给调用方法的栈的一个变量。

一个类可以包含另外一个类。在内部类中能访问外围类的所有实例变量。可以把内部类声明成静态的，直接创建静态的内部类。
通过调用父类的this属性，子类可以得到父类对象的引用。

对象可以声明实现Cloneable接口来说明它支持深拷贝。


# 

## 3.2 继承

Tips：
- 抽象类用abstract关键词修饰。抽象类不能被实例化，即不允许创建抽象类本身的实例。
- 没有用abstract修饰的类成为具体类，具体类可以被实例化。
- 重写：覆盖方法的父类实现。
- 用instanceof关键词用来判断一个对象是否是某一个类的实例。
- 你可以被子类覆盖的方法用final来修饰。继承关系的弱点是打破了封装，子类能够访问父类的实现细节，而且能以方法覆盖的方式修改实现细节。 
- 不能被继承，没有子类的类也用final修饰。

接口：
- 接口只是一种关于方法的约定，所以结构中只是定义了一些方法，并不包括方法实现。接口中所有的方法隐含都是public，定义的成员变量默认是自动是final和static的。要变化的东西，就要放在类的实现，不能放在接口，因为接口只是对一类事物的属性和行为更高层次的抽象。对修改关闭，对扩展开放，接口是对开闭原则的一种体现。
- 接口没有实现方法，但却可以得到接口类的对象。
一个类可以实现多个接口，一个接口可以继承另外一个接口。
- 抽象不应该依赖于细节，细节应当依赖于抽象。
- 接口的多种不同的实现方式成为多态。

- 有些子类只需要在一个地方使用，可以使用匿名类。

## 3.3 封装/重载/静态
public表示该属性公开，private表示该属性只有在本类内部才可以访问。
属性和方法有4种访问级别：public，protected，default，private。

有些方法处理的方式相同，只是输入参数不一样，可以把这些方法用相同的名称命名。这叫做方法重载。

一般通过类名访问静态变量。
Java中，可以使用内部类来封装一个类。对于非静态的内部类，创建实例需要依赖于它的外部类的实例。
如果一个内部类被static修饰，表示可以直接在外部创建它的实例，而不用先创建它的外部类实例然后再使用这个外部类实例创建这个内部类的实例。

## 3.4 枚举类型
若一个对象的取值范围是固定的一些值，往往使用枚举类型。用逗号隔开枚举类型的值，可以把词的类型或句子的类型定义成枚举类型。

每个枚举类型只是封装了一个整数类型，不过这带来了好处。枚举可以使代码更易于维护，有助于确保给变量指定合法的，期望的值。

## 3.5 集合类
- ArrayList
	- 支持根据下标找对象，也支持根据对象找下标
	- 该类中的很多方法没有检查传入参数

- 散列表
	- 在HashMap，一个键只能储存一个对应的值
	- 如果要把自定义的对象作为键的对象，要重写hashCode和equals方法
	- 存放在集合类里面的元素必须是对象
	- 用size方法返回集合有多少个元素

- 泛型
	- 抽象的类型。Java语言的泛型在编译器中实现，由编译器执行类型检查和类型推断。
	- 泛型方法
	- 可以要求泛型类型是某一个类的子类

- 遍历
	- 专门的迭代器用来方便地遍历集合中的元素。迭代器是一个叫做Iterator的接口。
	- for-each
	- 通过Hashmap中的entrySet得到一个集合对象
	- 遍历集合的时候不能删除元素。需要使用Iterator

- 对数组排序可以调用Arrays.sort方法，对于集合要使用Collections.sort
	- 排序的结果依赖两个元素的相对大小的比较
	- 自定义的类需要定义比较的方式
	- 可以用匿名类

- 如果只需要实现一种比较方式，实现Comparable；如果需要多种排序方式，实现比较器Comparator


## 3.6 SOLID原则
Single responsibility principle单一责任原则：当需要修改某个类的时候，原因有且只有一个。让一个类只担负一种类型责任，当这个类需要承担其他类型责任的时候，就需要分解这个类。

Open-closed开放封闭原则：软件实体应该是可扩展，而不可修改的。对扩展是开放的，对修改是封闭的。如果需要修改，最好只须改这一个类。

Liskov Substitution principle里氏替换原则：当一个子类的实例应该能够替换任何超类的实例时，它们之间才具备is-a关系

Interface segregation principle依赖倒置原则：高层模块不应该依赖于低层模块，二者都应该依赖于抽象。抽象不应该依赖于细节，而细节应该依赖于抽象。

Dependency inversion principle接口分离原则：不能强迫用户去依赖那些它们不使用的接口。


## 3.7 异常
断言：可以把assert语句放到Java源代码中，用来协助单元测试和调试。如果不满足断言条件，抛出错误。

异常是一个程序执行过程中发生的事件。它中断代码的正常运行。执行一行代码的时候可以抛出一个异常。异常是一个运行时的错误。对异常的说明包含异常本身的文本描述信息和异常发生的位置。这些都记录在异常堆栈中。编程中，可以在运行时可能发生问题的代码中检查是否有异常发生。try代码块可以捕捉异常，随后的catch代码块中处理异常。

发生异常后，要立即停止执行try代码块中的代码，开始执行catch块中的代码。如果没有try捕捉这个异常，则发生异常后，会立即停止执行该方法中的代码，返回调用它的方法，一直到捕捉这个异常的try或者整个程序退出为止。

Catch语句中尽可能指定具体的异常类型，必要时使用多个catch。不要试图处理所有可能的异常。


# 3.8 类库
Java类本身封装了数据和操作数据的方法。存在不同层次的封装。为了避免命名冲突，Java类位于不同的命名空间，叫做包。

用package关键字声明一个包名，而且这个声明必须放在程序的开始位置。调用属于同一包的类，不需要写包名。

JAR包可以在各操作系统上通用。JAR包是一个压缩文件，但必须用jar命令生成。

用javadoc命令可以根据源代码中的文档注释生成HTML格式的说明文档。文档注视中可以使用HTML标签。

## 3.9 编程风格
- 命名规范
	- 类，接口：名词，每个单词的首字母大写
	- 方法：动词，首字母小写，其余首字母大写
	- 常量：全部大写
	- 变量：名词，首字母小写，其余首字母大写
- 流畅接口：链式编程
- 日志
	- 为了不影响程序运行速度，一般不把搜索日志记录直接记录在数据库中，而是写在文本文件中。 























