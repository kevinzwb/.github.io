# 对象导论

## 抽象
所有编程语言都提供抽象机制，人们所能够解决的问题的复杂性直接取决于抽象的类型和质量。汇编语言和命令式的语言是对底层机器的轻微抽象，但它们的主要抽象是关于计算机结构，而非待处理任务的结构。 还有一些针对任务建模的编程语言，应用范围相对狭隘，不能形成通用的模式。

面对对象是一种通用的模式。这种思想把任务中的元素及其解空间抽象为对象，程序可以通过添加新类型的对象使得自身适用于某个特定问题。面对对象的程序有五个特征：
- 万物皆为对象。对象可以储存数据，并能对数据进行操作。
- 程序是对象的集合，它们通过发送消息来告知彼此所要做的。
- 每个对象都有自己的由其他对象所构成的储存。可以在程序中构建复杂的体系，同时将其复杂性隐藏在对象的简单性背后。
- 每个对象都拥有类型。
- 某一特定类型的所有对象都可以接受同样的信息，具有可替代性。 

对象具有状态，行为和标识。每一个对象都可以拥有内部数据（状态）和方法（行为），并且每一个对象在内存都有一个唯一的地址（标识），可以和其他对象区分开来。

## 对象
每一个对象都属于定义了特性和行为的某个特定的类。类描述了具有相同特性和行为的对象集合，是一个数据类型。接口确定了对某一对象所能发出的请求。在类型中，每一个可能的请求都有一个方法与之相关联。对象的实现是为了提供所需要的服务。

对于类型，创建者和使用者分别拥有不同的权限。类的使用者不能直接修改类的内部实现。三个访问指定词：
- public 元素对任何人可用
- private 元素只对类型创建者和类型内部方法可用
- protected 在private的基础上，元素可以被继承类访问
Java的默认包访问权限：类可以访问同一个包中的其他类的成员，包之外的成员被默认为private。

## 复用
代码复用有两种方式：组合和继承。组合更具灵活性，通过组合已有的对象，可以在不干扰现有代码的情况下，动态修改成员对象。继承是以现有的类为基础，通过添加和修改来创造出新的类型。继承的新类不仅包括现有类型的所有成员，而且复制了基类的接口。这导致，子类和基类具有相同的类型。

在处理类型的层次结构时，经常把一个对象当作其基类的对象来对待。泛化方法的功能，使得代码不必依赖于特定的类型，并且可以通过导出新的子类型从而轻松扩展程序设计。这种泛化的能力可以极大的改善程序设计，同时降低软件维护的代价。

在Java中所有的类都是继承于单一的基类Object，是单根继承结构。单根继承结构牺牲了一些灵活性，但带来了更高的生产率。单根继承结构保证了所有对象都具备某些功能，使得垃圾回收变得容易。由于所有对象都保证具有其类型信息，因此不会产生“无法确定对象类型”的僵局。

## 周期
对象的创建和生命期是一个关键的问题。每个对象的活动都需要占用资源，因此，当一个对象不再被需要的时候，它必须被清理掉，并释放其占用的资源。 Java采取动态内存分配的设计，在被称为堆的内存池中动态地创建对象。对象的数量，生命周期，具体类型只能在相关代码被执行的那一刻才能被确定。

## 异常
异常是一种对象，它从出错地点被抛出，并被专门设计用来处理特定类型错误的相应的异常处理器捕获。异常提供了一种从错误状况中进行可靠恢复的途径。

## Why Java
Java最重要的突破是为万维网的程序设计提供了革命的解决方案。

Web的原型是客户/服务器系统，其核心思想是服务器系统具有一个中央信息储存池，用来储存修改某种数据，并能传播给信息消费者--客户。这个技术的难点在于如何保证服务器和多个客户的交流的正确稳定。最初的Web就是一个巨型的客户服务器系统。然而，人们需要客户和服务器产生一定交互来完成更加复杂的功能。人们开始赋予客户端浏览器运行程序的能力，这产生了客户端编程。客户端编程引发了脚本语言的开发。通过使用脚本语言，用户可以将客户端程序的源代码直接嵌入到HTML页面中，解释语言的插件会在HTML页面被显示的时候自动激活。然而，脚本语言不能胜任复杂的任务。那些空白的领域就交给Java来完成。

Java不仅是一种功能强大，安全的，跨平台，国际化的编程语言，而且它还拥有丰富的类库，能够优雅低处理复杂编程任务。Java通过applet以及使用Java Web Start来进行客户端编程的。applet是只在Web运行的小程序，它作为网页的一部分而自动下载的。当applet被激活的时候，它会执行一个程序。因此，很多需要服务器处理的任务可以移交给客户端浏览器的applet来处理。这样提高了响应速度，也降低了网络流量和服务器负载。

## 总结
OOP看起来比过程型程序复杂很多，但事实上，编写良好的Java程序会更加简单易懂。在OOP中，程序员只需要关心，用来表示问题空间概念的对象，以及发送给这些对象的用来表示在此空间内行为的消息。对于设计良好的程序，通过阅读它就可以很容易地理解其代码。通常代码也会少很多，因为很多问题都可以通过重用现有的类库代码而得到解决。


# 一切都是对象
**Java假设我们只进行面对对象的程序设计**

## 用引用操作对象
- 一切都被视为对象，操作的标识符是对象的一个引用。
- 创建引用的时候最好进行初始化，将其联结到对象上。

- 内存管理
  - 寄存器：位于处理器内部。根据需求进行分配。无法被直接控制。
  - 堆栈：位于通用RAM，通过堆栈指针从处理器获得支持。创建程序的时候，Java系统必须知道储存在堆栈中所有元素的确切生命周期。
  - 堆：位于通用内存池，用于存放所有的Java对象。编译器不需要知道储存数据在堆的存活时间。对象的储存是自动分配的。
  - 常量储存：存放在程序代码内部。
  - 非RAM储存：数据在程序之外的储存介质上。
  
- 基本类型是一个特例。
  - Java 不用new来创建变量，而是创建一个并非引用的自动变量。这个变量直接储存”值“，并置于堆栈中。
  - 自动包装将基本类型转换成包装器类型。
  
- Java数组是安全的，确保被初始化，而且不能在范围之外被访问。

- 永远不需要销毁对象
 - 垃圾回收器会监视用new创建的对象，并辨别那些不会被再引用对象，释放这些对象的内存空间。

- Java是一种自由格式的语言，缩排格式使Java代码更容易被阅读，空格，制表符，换行不会影响程序的结果。

## 类
*在Java中所要做的全部工作就是定义类，产生那些类的对象，以及发送消息给这些对象*

- 类 = 字段 + 方法

- 






