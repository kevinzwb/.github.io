# 一种信任关系强度敏感的社会化推荐算法/山东大学计算机学院


## 引入
推荐系统作为一种有效的信息过滤技术,通过对用户的历史行为数据进行分析,在对用户的兴趣偏好进行建模的基础上,为用户主动推荐满足他们需求的资源.

利用用户间的社会关系进行推荐的方法,假设用户的决策过程容易受到信任关系或朋友关系的影响.
相互信任的朋友之间具有相近的兴趣爱好.

利用用户间的信任关系来进一步提高传统推荐算法的性能,并给出一种能够将信任关系信息进行融合的概率举证分解的框架.

StrengthMF通过将用户间的信任关系和评分信息通过共享的用户特征空间进行关联,使得它能在学习过程中进一步识别出与目标用户具有信任关系
并且兴趣比较接近的朋友,从而达到优化推荐结果的目的.

## 相关工作:
传统的协同过滤算法主要是对用户的历史评分数据进行,并且假设用户对某一物品的喜好同与其有着相似兴趣的用户相一致.

一般来说,协同过滤算法可以分为基于记忆和基于模型两种类型.
- 基于记忆的算法,需要将数据全部加载到内存中,每次推荐都需要使用启发式的规则来重新计算用户或物品在评分数据上的相似性,并进而对用户可能的评分进行预测.
然而这种类型的方法随着用户和物品数量的增多,往往具有较高的计算复杂度.

- 基于模型的推荐算法需要事先使用机器学习的方法训练出一个有效的推荐模型,然后在未知数据上使用训练好的模型,进行推荐.
由于能在训练过程中分别为用户和物品推导出与其对应的低纬潜在特征向量,以及在大数据集上所具有的高可扩展性和准确性.

以上这些传统的协同过滤算法虽然已经取得了较好的效果,但它们在推荐过程中都假设了用户之间是相互独立的,忽略了用户间的关联关系在许多应用场景中对推荐结果
产生的影响,特别是随着社会网络的出现,如何利用更为丰富的上下文信息和用户间的信任,社会关系信息进行推荐.

基于信任关系的推荐算法通过使用信任关系矩阵对目标函数进行约束,在学习过程中,使目标用户的特征向量尽可能与其朋友的特征向量接近,从而达到利用社会关系
进行推荐的目的.某某等人提出了一种使用随机游走模型对信任关系进行整合.

已有的社会化推荐算法大都假设用户间的信任关系是单一和同质的,而对信任关系进行显式区分的相关研究还较少.


## 基于信任关系的推荐方法
在社会网络中,用户总是倾向于选择他们所信任的朋友为其推荐的物品,并且用户之间的信任关系越强,受到朋友影响的可能性也就越大.
两个核心要素:用户之间的信任关系; 用户对物品的历史评分信息
算法的目标是通过所观察到的信任关系网络和历史评分信息,挖掘出隐藏在信任关系背后的用户特征,来进一步提高推荐的准确率.


引入矩阵分解的方法对用户间的信任关系网络进行分解,从而推导出一个能表示用户的低纬潜在特征向量.
这些特征是刻画两个用户之间信任关系的关键性因素.


# 基于信任模型的协同过滤推荐算法 / 夏小伍,王卫平,中国科学技术大学

## 信任机制
定义:
- 信任一个主观概念,是在已有知识基础上的主观判断,是主体A根据所处的环境对主体B身份和行为的可信度的度量.
主体间的信任关系可以分为直接信任和间接信任.
- 直接信任是指两个主体之间通过直接交易而建立了一种信任关系
- 间接信任是指2个主体之间没有进行过直接的交易,而是通过第三方推荐建立的一种信任关系:推荐信任.
- 信任度是信任的定量表示,也称可信度.

5个重要特征:
- 主观性: 不同的主体有不同的判断标准,不同的主体对同一个主体可能有不同的信任值.
- 非对称性: 信任是单方面的,一般不具有对称性
- 弱传递性: 
- 传播性: 主体之间信任关系的变化会影响其他主体之间的信任关系.
- 动态性: 主体之间的信任关系随着上下文环境和时间的推移都会随之动态变化.

-直接信任度计算:在用户-项目评价矩阵中,如果用户i和用户j共同评价了一个项目,则认为i与j进行了一次交易,那么i与j共同评价的项目的相关度可以反映用户i对j的直接信任.
- 间接信任度计算:通过i的评价值与j的预测值得出的i和j之间相关度可以反映i对j的间接信任. 对于没有评分的项目的预测值,可以利用基于项目的协同过滤推荐算法获得.首先计算项目之间的相关性,取得最近邻居,然后通过用户邻居对相关项目的评分预测用户对未评分项目的评分.


## 推荐产生
最近邻居集N的获取可以通过选择用户u最信任的k个用户或信任值大于指定阈值的用户作为邻居集.对任何用户未做评价的项目,可以通过用户的最近邻居集来预测.


本文在传统的协同过滤算法中引入信任机制,弥补了数据稀疏情况下传统推荐方法的不足之处,结合用户间的直接信任和间接信任使用户间的相似度计算结果更准确.

# 基于信任管理机制的推荐系统研究
信任是一个代理根据自己直接获得的经验,对另一个代理的能力,诚信度和可靠性的一种信念.
该定义认为信任是从直接交互的双方通过交往的历史经验中获得.但是,如果没有直接交往,也可以通过所信任的代理的推荐从而获得间接的信任.
信任关系具有传递特性.

定义: 
- 信任是授信用户对受信用户的推荐行为的诚实信,安全性,可靠性以及效用性的一种主观的肯定.
- 信任管理:信任的管理是从信任关系使用者的,为了方便而有效地使用信任而提供的关于信任的表示,信任的评价标准,信任的自适应更新,以及信任的查询等机制
- 信任的动态性:信任的动态性是指信任关系并不是不变和稳定的,它是随着时间变化的.在推荐系统环境中表现在随着个体间的交互行为的发生,在不同的时段,
或者在不同的背景下,信任关系都会发生.

## 基于信任机制的系统过滤推荐系统架构
两部分:一部分是用户信任关系的管理,这部分由用户自己操作,用于管理各自的好友列表.另一部分是系统推荐的.这部分由系统完成,生成对用户的推荐列表.

### 信任管理:信任管理部分向用户提供一种平台,用于管理与控制系统为用户服务的机制,从而从系统中得到更加个性化的服务.
- 初始化信任列表:每一个新用户进入系统的时候,都要求对系统中一些典型的项目进行评价,基于这些评价值,系统会自动计算出与该用户可能存在信任的其他用户,并为其赋予可能的信任度值.随着该用户与系统的交互行为的发生,用户可以自己管理属于该用户的信任列表.
- 信任评价: 信任的评价可以用简单的0和1来表示,也可以仿效等级评价标准.
- 信任度的自适应更新: 在推荐过程中,如果发现某用户的提供的推荐内容逐渐不太符合用户自身的偏好,用户可以自主的改变与该用户的信任程度,甚至中止与该用户的信任关系.相反地,如果发现某用户的推荐非常有用,那么与该用户的信任关系可以相应地.信任关系的动态改变可以依据用户对某项推荐的期望值与实际评价值之间的差距.
目标用户在接受其他用户推荐之间,根据他们之间的历史信任关系的经验,目标用户应有一个心理的期望值,将该值与用户接受后推荐后的实际评价值进行比较.若期望值高于实际值,则表明对该用户的信任关系程度过于高估,应适当的降低,反之,若期望值低于实际值,则表明该用户的信任关系过于低估,应提高信任度.
当用户兴趣发生迁移,相似度作为推荐的权重就不再准确.针对这种,用户可以自主的调整信任度,降低这些用户的推荐的权重,提高推荐的准确率.
- 整体信誉的查询,若对某个用户了解甚少,我们可以向系统索取其整体信誉,根据整体的信誉来指导自己的行为.所谓整体信誉是指系统中所有用户作为一个整体对某个用户的.整体信誉可以对信任关系网络进行分析而得到,它可以简单的以系统中所有用户与该用户的信任度的平均值来衡量.

### 生成推荐
在生成推荐的过程中,信任度可以作为相似度的一个补充,将信任度和相似度结合.作为复合权重引入到传统的协同过滤推到过程中,以达到提高推荐的准确率的目的.
- 计算用户间的相似度
- 计算复合权重,产生邻居列表
- 产生推荐列表

## 结论
在传统协同过滤的推荐策略的基础上引入信任管理,提供用户一种自主管理信任关系的机制,并且在推荐过程汇总引入信任关系,提高了推荐的准确性,
增强了用户对系统的信心,提出了一组信任度自适应更新的规则,使得用户间的信任度能适应于兴趣的变化而动态更新.


# 基于信任网络随机游走模型的协同过滤推荐/ 何明,刘伟世,北京工业大学计算机学院
社会化网络中,人们更倾向于依赖他们信任的朋友的推荐.信任关系是目前社会化推荐系统的应用最广的一种社会网络关系.
目前,在已有的社会化网络的典型信任模型和推理算法中,xx把用户分为入门,进阶和高阶等3种不同类型.一种方法利用网络流模型来计算用户的信任值,后者采用
激活扩散机制来计算信任值.还有利用宽度优先搜索顺序迭代计算用户和目标用户之间的信任值.
通过在推荐系统中引入用户信任网络能够有效缓解数据稀疏性问题和冷启动问题. 一种随机游走模型,将基于信任的和基于项目的协同过滤方法相结合,
在一定程度上缓解了推荐系统中的数据稀疏性和冷启动问题,同时也具有较高的推荐质量.

本文将协同过滤算法与社会化信任网络相结合,旨在建立一种基于信任关系的推荐系统,通过引入信任因素来缓解和解决传统协同过滤推荐系统中的数据稀疏性和冷启动问题所带来的负面影响.
基于信任关系的推荐方法中由于用户对未知项目的预测评分来自于直接信任或间接信任的用户,因此可以提高推荐质量.

## 贡献:
- 信任网络随机游走过程中选择下一跳用户节点的选择方式采用相似性与信任因子结合的方式.将PageRank思想与Sigmoid函数结合,对每个下游用户产生选择权重进行非等概率选择.一个用户被信任次数越多并且与初始目标用户相似性越大,则在游走过程中,被选中的可能性也就越大.
- 对游走轮数给出上下限的限定,以防止游走轮数过多而耗时和游走轮数过少对预测结果产生偏差.
- 游走过程中记录的每次游走结果产生的总概率为Pr_n.当预测一个用户对某个项目的评分时,会进行一轮游走.每轮游走中包含了多次游走,而每一次游走对应一个概率值.概率值表示了每个节点的停止概率,下一跳用户选择概率以及最终的项目选择概率.
- 最终每轮游走的结果会将该论中多次结果进行加权计算,即根据每次游走的概率计算权重.通过实现观察,每轮的结果的总概率Pr的大小差异很大,如果仅仅使用Pr作为每轮结果的总概率会导致最终的预测评分产生严重的偏差,最终预测值的大小将会是与权重最大的几个评分极其相似.使用log形式的函数,既考虑了概率大小对结果的影响,又避免了概率大小差异过大导致预测结果的严重偏差.


## 模型
皮尔逊相似度只考虑了项目之间评分数值的差异性,没有考虑项目之间共同评分用户数量对相似度的影响.

将sigmoid函数与皮尔逊相似度结合作为最终的相似度度量方式.

信任特性:
- 可度量性: 信任是可度量的,可以用一个值来表示信任关系的紧密程度.信任的度量方式是信任模型建立的基础.
通过可以用离散的布尔型或一段连续的取值区间作为信任的度量方式.

- 非对称性: 在社会化网络中由于信任关系具有一定的主观性,因此两个对象之间的信任关系.

- 弱传递性: 信任在对象之间存在一定的传递性,但信任关系的传递并不是绝对的,而是在一定条件下才能成立的.

- 多样性:信任关系的多样性指信任关系存在形式具有多样性.信任可以一对一也可以多对一,也可以一对多的.

每个节点分别代表一个用户,每条边代表用户之间存在信任关系. 信任关系可以由一个用户信任评分矩阵表示。

## 游走模型
传统的协同过滤算法只考虑了用户对项目的历史评分数据，所以当出现稀疏数据或冷启动问题时推荐精度就会明显下降。 于是引入信任网络中的随机游走机制来解决数据稀疏和冷启动问题。

### 单轮信任网络随机游走
假设模型中已存在用户集$U = {u_1,u_2,....u_m}$ 和项目集合$I = {i_1,i_2,....i_n}$，用户$u$对项目$i$的评分为$r_{u,i}$，本文所有评分均为1到5之间的整数值。 如果用户$u$信任用户$v$，那么用$t_{u, v}$表示用户$u$对用户$v$的评分为$t_{u,v}$。 本文采用布尔型的信任度量方式，因此$t$的取值范围为1或者0. 

定义$TU_u = \{v \in U | t_{u,v} = 1\}$表示被用户$u$直接信任的用户集合，用图$G = <U, TU>$表示整个信任网络，图中有向边的集合定义为$TU = \{ (u, v) | u \in U, v \in TU_u \}$. 

如果预测一个用户$u_0$对项目$i$的评分为$\bar{r}_{u_0,i}$, 则会以用户$u_0$$u$为根节点在信任网络中进行游走。当游走到信任网络中的某个用户节点$u$的时候，如果用户$u$对项目$i$已有评分，则停止随机游走并且返回项目评分$r_{u,i}$作为随机游走结果。如果用户$u$对项目$i$没有评分，则有两种选择： 

- 以$\alpha_{u, i, k}$的概率停止继续游走，并从当前用户$u$已评分的项目中选择一个与待评分项目$i$相似的项目$j$, 将该用户的评分$r_{u, j}$作为一轮的游走结果进行返回。 从用户$u$已评分项目中选择项目$j$的概率为$Pr(\sigma_{u, i} = j ) = sim_{i,j} / \sum_{h \in TU_u} sim_{i, h}$. $\sigma_{u, i}$ 表示用户$u_0$预测项目$i$的评分停止游走时选择的项目。

- 以$1 - \alpha_{u, i, k}$ 的概率从当前用户$u$的直接信任用户集合$TU_u$中选择一个用户作为下一跳用户$v (v \in TU_u)$继续在信任网络中游走。选择下一跳用户节点之前，首先要计算$TU_u$中所有用户在这一次选择中被选中概率的权重$W_{u,v} = (0.5 + 0.5 * sim(u_0, v)) * (1 / (1 + e^{-IN_v}))$. 根据Google PageRank的思想, 引入用户$v$的信任因子$IN_v$($IN_v = \sum_{u \in U \land u \neq v } t_{w,v}$), $IN_v$表示用户$U$中信任用户$v$的用户的总数。另外本文假设被选择用户的信任值越大，并且与目标用户的相似性越高，则在随机游走时被选中的概率。 所以将信任因子$IN_v$, 用户相似度$sim(u_0, v)$与Sigmoid函数相结合, 使被选择用户$v$的概率权重$W_{u, v}$ 与 $IN_v$ 和 $sim(u_0, v)$均成正比。 在计算完$TU_u$中每个用户的权重后，将所得权重归一化处理便可得出每个用户被选为下一跳用户的概率$ Pr(W_{u,v}) = W_{u, v} / \sum_{z \in TU_u} W_{u, z}$. 

当游走到每一个用户节点$u$时都会有一个对应的停止游走概率$\alpha_{u, i, k}$, 其中$u, i, k$分别表示当前游走节点为用户$u$， 目标项目为$i$ 和游走深度为$k$。 记用户节点$u$已评论的项目集合为$IU_u$. 本文假设目标项目$i$与$IU$中项目的最大相似度越大并且游走步数$k$越大则当前节点停止游走的概率$\alpha_{u, i, k}$越高。$\alpha_{u, i, k}$具体计算方式如下$\alpha_{u, i, k} = max_{j \in TU_u} sim_{i, j} * 1(1 + e^{-k/2})$. 至此，可以总结每轮游走停止的条件如下：

- 游走过程中的某个节点对待预测目标项目i 已做出直接评分并将该评分直接返回
- 当游走到节点$u$时, $u$对目标项目$i$没有评分，但以概率$\alpha_{u, i, k}$停止游走并返回一个类似项目的评分
- 如果对游走深度不做任何限制，那么游走过程可能会存在一直游走的可能性。基于六度分隔理论，为了避免这种情况，本文规定游走深度最大为6步。 当游走的深度为6时，无论该节点是否对项目$i$评分, 均会停止游走并返回评分。


为了得到一个可靠的预测评分，将会进行多轮随机游走，并根据多轮游走结果预测具体评分$\bar{r}_{u_0, i}$. 据此，需要对全局游走规定一个结束条件。当满足条件时全局游走结束，计算最终预测评分。假设预测用户$u_0$对项目$i$的评分进行第$k$次随机游走返回的结果为$r_k$，共进行了T趟随机游走， T趟随机游走返回结果的平均值为 $\bar{r}$。 设$\epsilon$ 为每轮游走结果的方差, $\epsilon^2 = \sum^T_{k = 1}(r_k - \bar{r})^2 / T $. 定义$\epsilon_i^2$ 为第 i 趟游走后计算得到的方差。 项目评分区间为[1, 5]， 可证明经过若干轮游走后方差$\epsilon_i^2$趋于收敛，即$|| \epsilon^2_{i + 1} - \epsilon^2 || \le \xi$。 $\xi$为预先预定的一个极小的正数阈值。 当方差收敛时即可结束游走，根据各轮结果计算预测分值$\bar{r}_{u_0, i}$。

全局游走的次数设置上限和下限。当游走轮数小于下限的时候，无论方差是否收敛都会继续下轮游走。当游走轮数等于上限时，无论方差是否收敛都停止计算。

每轮游走结束后都会选择一个用户$v$对项目$j$的评分$r_{v, j}$作为单轮随机游走的返回结果，其中项目$j$可能与目标项目$i$是相同的，也可能不同。当全局游走结束后, 可以得到一个由每轮返回评分组成的结果集$R_{u_0, i} = {r_{v,j} | v \in U, j \in I}$. 假设总共进行N轮游走，那么最终的预测评分计算方法为: $\bar{r}_{u_0,i} = \sum^N_{n = 1} K_n * r_n$. 其中$K_n$为第n轮游走的结果的权重, $r_n$是第n轮游走的返回结果。 本文假设权重$K_n$与各轮游走轨迹的总概率$Pr_n$相关，概率越高则权重越大，反之则越小。根据第n轮返回结果$r_n$的游走轨迹，可以计算从信任网络中初始节点$u_0$到最终节点$u_0$返回项目$j$的总概率$Pr_n$.

$Pr_n = (1 - \alpha_{u,i,1}) Pr(W_{u_0,u_1}) (1 - \alpha_{u,i,2}) Pr(W_{u_1,u_2}) ...... (1 - \alpha_{u,i,k}) Pr(\sigma_{v,i} = j)$

但是在真实测试中发现，每轮的结果的总概率$Pr_n$的大小差异很大，如果仅仅使用$Pr_n$作为每轮结果权重，会导致最终的预测评分产生严重的偏移，$\bar{r}_{u_0,i}$的大小将会与权重最大的几个评分极其相似。因此使用$-1/log(Pr_n)$替代最初的$Pr_n$，将其进行归一化后得到每轮游走的最终权值$K_n = (1 / log(Pr_n)) / (\sum^N_{i = 1} log(Pr_i)$




# 融合标签传播和信任扩散的个性化推荐方法

摘要：信任网络能模拟现实社会，因此用户间的信任数据可用于推荐算法，但同时也面临数据稀疏的问题，推荐效果较差。 针对该问题，提出融合标签传播和信任扩散的个性化推荐方法。设计基于标签传播的大社区发现算法，得到独属于每个用户的大社区。根据各用户所属的大社区用户间的信任网络，给出信任的预处理算法，预测用户新的信任关系，从而扩展用户的信任网络， 并利用混合信任扩散算法， 使用户及其所在的大社区内其他用户之间的信任度更趋差异化。

一般情况下，用有向图表示信任网络，用户由节点来表示， 而边就可以表示为用户间的信任关系。本文的个性化推荐试图有效处理信任关系数据稀疏的问题，在对用户之间的信任关系进行扩展的同时，将信任关系进一步差异化。将用户项目评分数据与用户之间信任数据作为整个架构的输入，并且用字典来表示数据，分别为用户信任关系字典和用户项目评分字典。个性化推荐架构核心为经由基于标签传播的大社区内通过信任预处理模块和信任扩散模块得到新的用户信任关系字典，接着使用用户项目评分字典进行协同过滤，得到预测评分值。

在庞大的信任网络中，总是存在着由兴趣主题聚合的社区。到那时每个用户信任或者被信任的用户是有限的，因此，有必要为用户发掘属于自己的社区。社区的邻居们总能或多或少地对用户提供一些帮助，推荐用户可能喜爱或者感兴趣的东西。

用户的标签可以代表用户的某一属性。标签传递的意义在于，在一个用户关注的所有用户中，标签出现次数最多的用户也可能有此爱好。具有相同标签的用户同属于一个社区。

## 基于标签传递的社区发现算法
- 使用用户信任关系字典进行迭代，得到用户A的信任列表以及被信任列表，然后获得信任用户的信任列表以及被信任用户的被信任列表，可以设定迭代层来控制用户的关系网大小，得到关系网用户集合。
- 发现用户A的1-派系，此派系中所有用户相互关注：遍历用户A所信任的用户，得到同时也关注用户A的用户列表，在这个列表中寻找相互关注的用户列表U，并且将此列表的所有用户赋予标签L0.使用1-派系的目的是为了减少标签传递算法得到社区的随机性。
- 图分割
- 通过图分割得到与用户A标签相同的用户群，从而获得独属于用户A的社区用户列表$C_A$
- 如果每个用户的标签都是他关注的所有人的标签出现频次最高的标签，那么停止迭代。

## 信任预处理算法
社区中的用户真实的信任关系有限，因此面临数据稀疏的问题。因此有必要对新的信任关系进行预测。

假设用户A信任的用户中，很多用户同样信任用户B，从而一定程度上表明A和B存在一定程度上表明A和B存在一定相似性，未来B信任的人，A也可能被信任。将协同过滤思想应用于用户信任关系字典。
- 用户相似度计算：用户$U_i$对用户$U_j$相似度可以定义为：用户$U_i$信任的用户集合与信任用户$U_j$的用户集合的用户交集数和用户$U_i$信任的用户的总数之比。即是，用户$U_i$关注的用户中，有多大比例也关注了用户$U_j$。
- 用户信任度预测：获取用户$U_i$的社区内有信任关系的，并且能够计算得到相似度的用户作为邻居用户集合。


## 信任扩散算法
传统的扩散算法是应用在用户-商品二部图或者用户-商品-标签三部图上；本文则是对扩散算法进行改进，应用于用户-用户二部图上，称之为信任扩散算法。

信任网络中有信任关系和被信任关系。调查表明，大多数认为对于一件商品最为可靠的信息来源是和他们相似的一群人。 

将二部图转换为信任推荐贡献字典。


## 用户项目预测评分
经过基于标签传递的社区发现，信任预处理和信任扩散算法，得到了新的用户信任关系字典，接着将用户信任度取代传统协同过滤的用户相似度，并且以用户信任度为权重。然后，依据用户的信任用户集合对项目的评分来预测目标用户对项目的评分。



# 基于二值信任网络的推荐算法改进/ 林韶娟，陶晓鹏，复旦大学计算机学院

## 摘要
协同过滤算法根据用户项目评分数据进行推荐，但评分数据很稀疏 ，使得用户无法获得满意的推荐，尤其是新用户。而信任网络以及社交网络能提供用户之间的关系数据，可用于推荐算法。基于二值信任网络，提出GenTrust算法预测新的信任关系，扩展信任网络，并提出IndegreeTrust算法，区分被同一用户信任的所有用户。 

文献表明，相比于推荐系统，用户能从朋友或者熟悉的人获得更可靠的推荐。因此将信任网络引入推荐系统中，将用户信任度替代用户相似度，即基于信任网络的推荐算法。基于信任网络的推荐算法在一定程度上减轻了数据稀疏带来的问题，一个最极端的例子是：即是目标用户没有任何评分，用户相似度无法计算，根据传统协同过滤算法无法获得推荐。然而目标用户只要有一个信任的用户，就可以根据信任用户所评价的项目而得到推荐。

## 贡献
- 用户因为信任类似的用户而存在一定的相似性，因此提出GenTrust算法预测新的信任关系，扩展信任网络。
- 二值信任网络中信任值只有0/1，因此提出IndegreeTrust算法区分被同一用户信任的所有用户。


















