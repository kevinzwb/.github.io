# 1.0自然语言处理系统
- 语言的解析
- 语义的理解
- 语言的生成

现代自然语言处理已经跨越了对词语的研究，发展到了对句子的研究，即是对句法，句义，以及句子生成的研究，已经能够比较好地解决句子层面的问题，但还未达到完全解决篇章层面的问题。

人类语言不具备严整的逻辑结构。由于语言高度的语境化和隐喻化的性质，人类自身对于特定语言的表达的本义往往也有不同的理解。人类对于文本的理解，很大程度上受到主题，作者以及时间等相关背景知识的影响。

句子的意义是不能从字面的意义直接得到的。

实现句子到知识库的主要方法是语义角色标注系统，但在整句理解层面上，语义角色标注系统的精度严重依赖于句法解析系统。

**准确的命名实体识别是以准确的分词和词性标注为前提的**

语义组块用来确定一个以上的词汇构成的短语结构，即是短语级别的标注，主要识别名词短语，动词性短语，介词短语等，以及其他类型的短语结构。
语义阻块的自动识别来源于中文分词，词性标注和命名实体识别的共同信息，也就是说，语义组块的识别特征必须包含中文分词和词性标注两部分。

语义角色标注是以句子中的谓语动词为中心预测出句子中各个语法成分的语义特征，是句子解析的最后一个环节。语义组块，语义角色标注等分析结果，可以通过机器学习方法转换为知识库的RDF形式，并直接用于自动问答系统。


NLP全系列框架
- 哈工大
- Stanford NLP
- Fudan NLP
- HanLP

NLP分词框架
- ICTCLAS分词系统
- Ansj中文分词系统
- 结巴分词

# 3.0 词汇与分词技术
三个流派：
- 机械分词法：基于字典，讲文档中的字符串与词典中的词条进行逐一匹配，如果词典中找到某个字符串，则匹配成功，可以切分，否则不予切分。优点：简单实用；缺点：词典完备性不能得到保证。
- 基于语法和规则的分词法：在分词的同时进行句法，语义分析，利用句法信息和语义信息来进行词性标注，以解决分词的歧义现象。 缺点：复杂，麻烦
- 基于统计的分词法：根据字符串在语料库中出现的统计频率来决定其是否构成词语。假设：字与字相邻出现的频率或概率能够较好地反映它们成为词的可信度。

## 3.1 中文分词
信息处理的目标是使用机器能够理解和产生自然语言。因为扩大中文词汇的方法是通过构造汉字的复合新词，而不是创造新的字符来完成的。这造成了汉语中所谓的词和短语之间没有明确的概念。

汉语具有一定的柔软度。

汉语词的定义：汉语信息处理使用的，具有确定的语义或语法功能的基本单位。

*《信息处理用现代汉语分词规范》，《北大规范》*

分词标准：
- 粗粒度：将词作为语言处理最小的基本单位进行切分
- 细粒度：不仅对词汇进行切分，也要对词汇内部的语素进行切分
粗粒度主要用于自然语言处理的应用中，细粒度分词常常用于搜索引擎。
一般，在索引的时候使用细粒度的分词以保证召回，在查询的时候使用粗粒度的分词以保证精度。

歧义切分问题是中文分词的核心问题。机械分词系统基于最大匹配，分为正向匹配法和逆向匹配法。
基本原理：将待分析的汉字串与机器词典中的词条进行最大匹配，若在词典中找到某个字符串，则匹配成功。
早期的分词器没有考虑词汇上下文的相关性，分词的准确度都不高。这启示：一个词汇的出现与其上下文环境中出现的词汇序列存在着紧密的关系，
如果算法不能反映和处理这种上下文依赖关系，则不能达到满意的分词结果。语言模型的引入，使得分词算法得到了显著的改善。

**汉语的构词机制是一个动态的自组织认知系统**
表达概念的新词汇被统称为未登录词识别。未登录词总数额大约九成是专用名词，其余为通用新词或专业术语。通过构词规则识别未登录词的方法在狭窄的专门领域效果很好，在大规模不同领域的效果不理想。基于半监督的条件随机场算法，对于处理不同领域的专名识别具有较低的成本和满意的效果。

### 3.1.1流程
- 读取待分词的字符串。可以多线程处理多个句子和段落。
- 根据输入的配置信息，导入相应的词典
- 进入粗分阶段
  - 对句子进行字符级别的切分
  - 一元切分，查询核心词典，将字符切分的结果与词典词最大匹配，匹配的结果包括词形，词性，词频等信息形成一元词网，之后对一元词网进行原子切分。
  - 二元切分，用一元分词的结果查询二元词典，与二元词典进行最大匹配，匹配的结构形成一个grpah词图。
  - Nshort算法计算。将查出的每个结果按照平滑算法计算二元分词的词频数得到词图中每个节点的权重，应用NShort算法累加词图中每个节点构成的所有路径，权重最小的那条路径对应的词图节点就是初次切分的结果
  - 对于粗分结果执行后处理应用规则，识别时间类的专有名词
- 使用隐式马尔科夫模型识别未登录词
  - 根据人名识别词典，地名字典，将粗分结果与之匹配，Viterbi算法识别外国的人名和地名
  - 加载组织机构名字典，使用Dijkstra算法识别组织名
 - 将命名实体识别后的分词结果加入词图中，对词图再次进行细度分词。
 - 使用词性标注模型，Viterbi算法，对分词结果进行词性标注
 - 转换路径为分词结果，并输出分词结果
HanLP的改善：
- 使用双数组Tire树读取和检索词典，提高性能
- 使用提供更丰富的命名实体识别库
- 搜索引擎系统的支持
- 细分阶段使用最短路径法



# 4.0 概率图模型
**图模型结合了概率论和图论的知识，用图模式表达基于概率相关关系的模型的总称。分为三个部分：**
- 模型表示理论
- 模型推理理论
- 模型学习理论

概率论基础概念
- 联合分布概率
- 边缘分布概率
- 条件概率分布
- 独立性与条件独立性

贝叶斯方法把计算“具有某种特征的条件下属于某类”的概率转换成需要计算“属于某类的条件下具有某特征”的概率，属于监督学习。
朴素贝叶斯理论源于随机变量的独立性。假设一个对象的特征向量中每一个维度都是相互独立的。

文本表示
- e-Hot表达：把每个词表示成一个长长的向量。相互独立地表示语料中的每个词，忽视了相关性。
- TFiDF模式：增加词频信息。TF指某个给定的词语在该文件中出现的概率。IDF指一个词语普遍重要性的度量。

统计语言模型是用来计算句子中某种语言模式出现概率的统计模型。N-gram模型是在模型的训练阶段，统计语料中各种语言模式出现的次数，
并通过一定的统计算法，将它们计算好之后就储存起来。在预测阶段，当需要计算一个新的句子的概率时候，只需查找句子中可能出现的语言模型的概率参数，
并讲它们连乘在一起形成最终的结果。


# 5.0 词性，语块与命名实体识别
## 5.1 词性标注
词性是词汇的语法属性，是连接词汇到句法的桥梁。由于汉语缺乏形态变化，一个词的词性是由它在句子中的成分所决定的。

兼类词的词频比重大，主要困难还是在于消解歧义。

《宾州树库规范》和《北大规范》

算法很多，属于概率图模型的范畴。介绍了基于最大熵的词性标注算法--stanfordNLP。

## 5.2 语义组块标注
语义组块是句子内的一个非递归的核心成分。这种成分包含核心成分的前置修饰成分，不包含后置附属结构。

句法块。句法分析：
- 块识别：利用块识别器快速识别出句子中所有的块
- 块内结构分析：对每个块内部的成分赋予合适的句法结构
- 块间关系分析：利用块连接器将不同的块组合成完整的句法结构树
一方面对不同的子问题的准确功能定位，可以独立地选用不同的语言模块和搜索策略加以分析处理；另一方面，通过在块层次上进行自底向上的快间关系分析和自顶向下的块内结构分析，可以大大提高整体的分析效率，达到降低句子分析难度的目的。

语义组块的另一个用处在于浅层语法分析，将语义角色标注的工作建立在浅层语法分析之上，不再使用句法解析树，而是利用分析出来的语法组块直接进行语义角色标注。
希望利用相对更准确的组块分析结果提升语义角色标注的准确率。

语义组块可用于知识库的实体关系抽取。

语义组块最常用的算法是条件随机场。

## 5.3 命名实体识别
主要任务是对于一篇待处理文本，识别出其中出现的人名，地名，组织机构名，日期，时间，百分数，货币这7类的命名实体。

命名实体识别技术是信息抽取，信息检索，机器翻译，问答系统等多种自然语言处理技术必不可少的组成部分。

- 中文人名的特征
- 中文地名的特征
- 中文组织结构的特征

### 5.3.1 分词框架
基于领域的分词器针对不同领域做了优化。不同领域的文本可以使用本领域内专门的外部词典进行识别。
专业化的细分势必带来更高的识别精度。
领域分词系统：
- 将输入文本先使用核心词典进行基础分词处理
- 对分词结构的文本再按所属领域计算文本所属的分类
- 根据文本所属的领域不同，执行使用领域专属的分词器，再对领域内的专名进行分词

命名实体模块对于不同的命名实体，可以使用专门的算法和专门的外部词典进行识别，专业化的算法和语料资源对专门的问题势必达到更高的精度。
命名实体识别系统：
- 将输入文本先使用核心词典进行基础分词处理
- 再对分词结果进行命名实体识别
  - 使用专门的模型对分词结果进行人名识别
  - 使用专门的模型或词典对分词结果进行地名识别
  - 使用专门的模型或词典对分词结果进行组织结构名识别
- 结果整合。将三种结果合并到基础分词的结果中作为最终的结果输出。

实践证明：标准的CRF算法可以解决大多数人名识别的问题。地名是个封闭的字典。机构名可以使用semi-CRF算法。


### 5.4 字典和统计相结合
- 通过原子切分，将字符串转换为字符列表
- 与内部字典进行最大匹配，根据匹配结果给出词的特征函数
- 将字符串与匹配到的词典词汇共同匹配特征模板，包括CRF的标准模板和内部词典匹配的结果模板
- 根据匹配的模板，查询和计算模板的概率
- 建立词网，使用Viterbi解码
- 输出分词结果


# 6.0 句法理论与自动分析

